class Dan_mu_ku{constructor(b,a,c,d){this.vm=b;this.url=c;this.where=d;this.room_id=a;this.time_list=[];this.first_flag=!0}get_dan_mu(){$.getJSON("/get_dan_mu",{room_id:this.room_id},b=>{for(const a of b){let c=a.timeline;if(this.first_flag){for(const d of b)this.time_list.push(d.timeline);this.first_flag=!1}else-1===this.time_list.indexOf(c)&&(this.on_dan_mu(a),10<=this.time_list.length&&this.time_list.shift(),this.time_list.push(c))}console.log(this.time_list)}).fail(()=>{this.vm.$data.information=
"\u670d\u52a1\u5668\u8fde\u63a5\u5df2\u65ad\u5f00, \u8bf7\u5237\u65b0\u6d4f\u89c8\u5668\u6e90"})}on_dan_mu(b){let a=b.nickname;b=b.text;this.vm.$data.start_flag?this.send_to_server(a,b):console.log("stop")}send_to_server(b,a){console.log(b+": "+a);a=a.split("#")[0];a=a.split(" ");b=a.shift();console.log(b);console.log(a);if("\u70b9\u6b4c"===b||"."===b)console.log(!0),a=a.join(" "),a=a.split("&"),void 0===a[1]&&(a=a[0].split("\uff06")),console.log(a),b=$.trim(a[0]),a=$.trim(a[1]),console.log(b),console.log(a),
$.get("move_music",{index:-1,url:this.url,artist:a,where_url:this.where,music_name:b})}};
